<ion-header>
  <ion-toolbar class="search">
    <ion-img src="/assets/logo.png" style="width: 4em;" slot="start" class="ion-margin"></ion-img>
    <ion-searchbar
      style="padding: 0;"
      mode="ios"
      placeholder="Chercher une histoire" 
      [debounce]="250" 
      showCancelButton="never"
      searchIcon="search"
      (click)="search()"
      ></ion-searchbar>
  </ion-toolbar>
</ion-header>



<ion-content>
  <h2 class="section" *ngIf="userService.savesId.length !== 0">
    <ion-icon name="save"></ion-icon>
    Mes sauvegardes
  </h2>

  <ion-slides class="slides" [options]="slides.basicOpts" *ngIf="userService.savesId.length !== 0">
    <ion-slide *ngFor="let bookId of userService.savesId">
      <app-card-book [bookId]="bookId"></app-card-book>
    </ion-slide>
  </ion-slides>

  <h2 class="section" *ngIf="userService.list.length !== 0">
    <ion-icon name="list"></ion-icon>
    Ma liste
  </h2>

  <ion-slides class="slides" [options]="slides.basicOpts" *ngIf="userService.list.length !== 0">
    <ion-slide *ngFor="let bookId of userService.list">
      <app-card-book [bookId]="bookId"></app-card-book>
    </ion-slide>
  </ion-slides>

  <h2 class="section" *ngIf="userService.followList.length !== 0">
    <ion-icon name="people"></ion-icon>
    Mes suivies
  </h2>

  <ion-slides class="slides" [options]="slides.basicOpts" *ngIf="userService.followList.length !== 0">
    <ion-slide *ngFor="let book of userService.followList">
      <app-card-book [bookJSON]="book"></app-card-book>
    </ion-slide>
  </ion-slides>

  <h2 class="section">
    <ion-icon name="star"></ion-icon>
    Les mieux notés
  </h2>

  <ion-slides class="slides" [options]="slides.basicOpts" class="ion-no-margin" *ngIf="topRatedList | async as topRated; else loadingTopRated">
    <ion-slide *ngFor="let book of topRated">
      <app-card-book [bookJSON]="book"></app-card-book>
    </ion-slide>
  </ion-slides>

  <ng-template #loadingTopRated>
    <div style="height: 300px; display: flex; align-content: center!important; align-items: center!important; justify-content: center;">
      <ion-spinner name="bubbles"></ion-spinner>
    </div>
  </ng-template>

  <h2 class="section">
    <ion-icon name="eye"></ion-icon>
    Les plus vues
  </h2>

  

  <ion-slides class="slides" [options]="slides.basicOpts" class="ion-no-margin" *ngIf="mostVueList | async as mostVue; else loadingMostVue">
    <ion-slide *ngFor="let book of mostVue">
      <app-card-book [bookJSON]="book"></app-card-book>
    </ion-slide>
  </ion-slides>

  <ng-template #loadingMostVue>
    <div style="height: 300px; display: flex; align-content: center!important; align-items: center!important; justify-content: center;">
      <ion-spinner name="bubbles"></ion-spinner>
    </div>
  </ng-template>

  <h2 class="section">
    <ion-icon name="time"></ion-icon>
    Les plus récents
  </h2>

  <ion-slides class="slides" [options]="slides.basicOpts" class="ion-no-margin" *ngIf="mostRecentList | async as mostRecent; else loadingMostRecent">
    <ion-slide *ngFor="let book of mostRecent">
      <app-card-book [bookJSON]="book"></app-card-book>
    </ion-slide>
  </ion-slides>

  <ng-template #loadingMostRecent>
    <div style="height: 300px; display: flex; align-content: center!important; align-items: center!important; justify-content: center;">
      <ion-spinner name="bubbles"></ion-spinner>
    </div>
  </ng-template>
</ion-content>
